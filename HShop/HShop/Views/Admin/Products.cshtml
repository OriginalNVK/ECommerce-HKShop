@model IEnumerable<HShop.ViewModels.HangHoaVM>
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    ViewBag.Title = "Quản lý hàng hóa";
}
<div class="card">
    <div class="flex-between">
        <div>
            <a asp-action="Create" asp-controller="Products" class="btn btn-success">
                <i class="fa fa-plus"></i> Thêm hàng hóa
            </a>
        </div>
        <div class="flex-center gap-2">
            <div class="col-md-4">
                <label>Chọn danh mục:</label>
                <select class="form-select" id="categoryFilter">
                    <option value="">Tất cả danh mục</option>
                    @foreach (var category in ViewBag.Categories) // Giả sử bạn đã truyền Categories từ controller
                    {
                        <option value="@category.MaLoai">@category.TenLoai</option>
                    }
                </select>
            </div>
            <div class="col-md-3 ms-auto">
                <label>Kích thước trang:</label>
                <div class="input-group">
                    <input type="number" class="form-control" min="5" name="pageSize">
                    <button class="btn btn-primary" onclick="applyPageSize()">Áp dụng</button>
                </div>
            </div>
            <div>
                <button class="btn btn-secondary" onclick="resetFilters()">
                    <i class="fa fa-refresh"></i> Reset
                </button>
            </div>
        </div>
    </div>
    <div class="card-header">
        <h4 class="mb-0 text-center" style="font-size: 20px">Danh sách hàng hóa</h4>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped table-hover" id="hoaDonTable">
                <thead class="thead-dark">
                    <tr>
                        <th class="text-center">Mã HH</th>
                        <th class="text-center">Ảnh minh họa</th>
                        <th class="text-center">Tên hàng hóa</th>
                        <th class="text-center">Tên loại</th>
                        <th class="text-center">Đơn giá</th>
                        <th class="text-center">Giảm giá</th>
                        <th class="text-center">Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="text-center">@item.MaHh</td>
                            <td class="text-center"><img src="~/Hinh/HangHoa/@item.Hinh" alt="@item.TenHH" width="100" height="110"></td>
                            <td class="text-center">@item.TenHH</td>
                            <td class="text-center">@item.TenLoai</td>
                            <td class="text-center">@item.DonGia</td>
                            <td class="text-center">@item.GiamGia</td>
                            <td class="text-center">
                                <div class="btn-group flex-center gap-2" role="group">
                                    <a asp-action="Detail" asp-controller="Products" asp-route-id="@item.MaHh"
                                       class="btn btn-sm btn-info" title="Xem chi tiết">
                                        <i class="fa fa-eye"></i>
                                    </a>
                                    <a asp-action="Update" asp-controller="Products" asp-route-id="@item.MaHh"
                                       class="btn btn-sm btn-warning" title="Chỉnh sửa hàng hóa">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                    <a asp-action="Delete" asp-controller="Products" asp-route-id="@item.MaHh"
                                       class="btn btn-sm btn-delete" title="Xóa đơn hàng">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.btn-delete').click(function (e) {
                e.preventDefault(); // Ngăn chặn hành vi mặc định
                var deleteUrl = $(this).attr('href'); // Lấy URL từ thẻ a

                // Hiển thị hộp thoại confirm
                if (confirm('Bạn có chắc chắn muốn xóa đơn hàng này?')) {
                    window.location.href = deleteUrl; // Chuyển hướng nếu đồng ý
                }
            });
        });
    </script>
}